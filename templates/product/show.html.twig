{% extends 'base.html.twig' %}

{% block title %}Product{% endblock %}

{% block body %}
    <h1>Product</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ product.id }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ product.name }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ product.description }}</td>
            </tr>
            <tr>
                <th>Price</th>
                <td>{{ product.price|number_format(2, ',', ' ') }} â‚¬</td>
            </tr>
            <tr>
                <th>Stock</th>
                {% if product.stock == 0 %}
                    <td>Out of stock</td>
                {% else %}
                    <td>{{ product.stock }}</td>
                {% endif %}

            </tr>
            <tr>
                <th>Photo</th>
                <td>
                    <img src="{{ asset('uploads/'~ product.photo) }}" style="max-width: 100px;">
                </td>
            </tr>
        </tbody>
    </table>

    {% if is_granted('ROLE_USER') %}
        {% if product.stock > 0 %}
            <a href="{{ path('app_add_to_cart', {'productId': product.id}) }}" class="btn btn-primary">Add to cart</a>
        {% endif %}
    {% endif %}

    <a href="{{ path('app_product_index') }}" class="btn btn-tertiary">Back</a>

    {% if is_granted('ROLE_ADMIN') %}
        <h2>Edit Product</h2>

        {{ include('product/_form.html.twig', {'button_label': 'Update'}) }}

        <h2>Delete Product</h2>
        {{ include('product/_delete_form.html.twig') }}
    {% endif %}
{% endblock %}
