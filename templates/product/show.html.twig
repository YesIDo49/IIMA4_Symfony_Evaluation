{% extends 'base.html.twig' %}

{% block title %}{{ 'product.title'|trans }}{% endblock %}

{% block body %}
    <h1>{{ 'product.title'|trans }}</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>{{ 'product.name'|trans }}</th>
                <td>{{ product.name }}</td>
            </tr>
            <tr>
                <th>{{ 'product.description'|trans }}</th>
                <td>{{ product.description }}</td>
            </tr>
            <tr>
                <th>{{ 'product.price'|trans }}</th>
                <td>{{ product.price }}</td>
            </tr>
            <tr>
                <th>{{ 'product.stock'|trans }}</th>
                {% if product.stock == 0 %}
                    <td>{{ 'product.out_of_stock'|trans }}</td>
                {% else %}
                    <td>{{ product.stock }}</td>
                {% endif %}
            </tr>
            <tr>
                <th>{{ 'product.photo'|trans }}</th>
                <td>
                    <img src="{{ asset('uploads/'~ product.photo) }}" style="max-width: 100px;">
                </td>
            </tr>
        </tbody>
    </table>

    {% if is_granted('ROLE_USER') %}
        {% if product.stock > 0 %}
            <a href="{{ path('app_add_to_cart', {'productId': product.id}) }}" class="btn btn-primary">{{ 'product.add_to_cart'|trans }}</a>
        {% endif %}
    {% endif %}

    <a href="{{ path('app_product_index') }}">{{ 'product.back_to_list'|trans }}</a>

    {% if is_granted('ROLE_ADMIN') %}
        <h2>{{ 'product.edit_product'|trans }}</h2>

        {{ include('product/_form.html.twig', {'button_label': 'Update'}) }}

        <h2>{{ 'product.delete_product'|trans }}</h2>
        {{ include('product/_delete_form.html.twig') }}
    {% endif %}
{% endblock %}
